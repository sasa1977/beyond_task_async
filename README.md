Sample code for http://theerlangelist.com/2015/07/beyond-taskasync.html